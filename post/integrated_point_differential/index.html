<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta property="og:title" content=" a (potentially) better way to measure game closeness &middot;  steven liao" />
<meta property="og:site_name" content="steven liao" />
<meta property="og:url" content="https://stevenliao.me/post/integrated_point_differential/" />


    <meta property="og:type" content="article" />
    <meta property="og:article:published_time" content="2018-08-10T15:04:03&#43;08:00" />
    

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta name="twitter:title" content="a (potentially) better way to measure game closeness" />
    <meta name="twitter:description" content="" />
    <meta name="twitter:url" content="https://stevenliao.me/post/integrated_point_differential/" />


<title> a (potentially) better way to measure game closeness &middot;  steven liao</title>


    <meta name="description" content="" />


<meta name="p:domain_verify" content="fc173d84e3a4de948ed4bda2908afd3e"/>
<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />





<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,700italic,300,700' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Bree+Serif' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Didact+Gothic" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://stevenliao.me/css/pure-min.css">
<link rel="shortcut icon" type="image/x-icon" href= "/favicon.ico">
<link rel="icon" href="/favicon.ico" type="image/x-icon">


    <link rel="stylesheet" href="https://stevenliao.me/css/grids-responsive-min.css">

<link rel="stylesheet" href="https://stevenliao.me/css/crisp.css">
<link rel="stylesheet" href="https://stevenliao.me/css/rrssb.css">








<link rel="canonical" href="https://stevenliao.me/post/integrated_point_differential/" />


    


    </head>
    <div id="layout" class="pure-g">
        <div class="sidebar pure-u-1 pure-u-md-1-6">
            <script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>

<div class="header">
    <div class="title">
        <h1><a href="https://stevenliao.me/">steven liao</a></h1>
	<p class="lead">sports analytics blog</p>
        
    </div>
    <div class="logo">
        
        
            
	    <a id="logo" href="/about">
		    <img src="/img/self_portrait.png" alt="steven liao"/>
		    <img src="/img/self_portrait_colored.png" alt="steven liao"/>
	    </a>
            
        
    </div>
    
    
    

</script>
    <ul class="sidebar-menu">
        
            <li class="sidebar-menu-item"><a href="https://stevenliao.me/about/">about</a></li>
        
            <li class="sidebar-menu-item"><a href="https://stevenliao.me/credits/">credits</a></li>
        
    </ul>

    <div id="follow-icons">
        
        
        <a href="https://www.linkedin.com/in/steven-liao-997688b8/" target="_blank" rel="me"><i class="fa fa-linkedin-square fa-3x"></i></a>
        <a href="https://www.github.com/liaosteven" target="_blank" rel="me"><i class="fa fa-github-square fa-3x"></i></a>
        
        
        
        
        
    </div>

    
</div>
</script>

        </div>
        <div class="content pure-u-1 pure-u-md-5-6">
            <div class="article singlepage" id="" class="post">
                <div class="post-stamp">
                    <h1 class="post-title">a (potentially) better way to measure game closeness</h1>
                    <span class="post-date">Aug 10, 2018 &middot; 6 minute read</span>
                    

                    <span class="taglist">
                    
                    </span>
                </div>
                

<p>What is the best way to measure how close a game is?</p>

<p>As a recreational sports better, this question is clearly of interest. Consider:</p>

<ol>
<li><p>If two teams are 8-0, and one has been winning in blowouts, but the other has been winning in close games, perhaps the &lsquo;blowout&rsquo;-winning team is the better squad.</p></li>

<li><p>If team A is playing team B for the second time this year, perhaps it would be interesting to know how close things were the first time around.</p></li>

<li><p>Knowing how &lsquo;close&rsquo; a game was is useful for determining if we want to watch a game - i.e. I&rsquo;m bored and I have time to watch one game, how do I determine which game to watch?</p></li>
</ol>

<p>So the obvious answer is, check the score. But the score is not necessarily indicative of how close a game is. If a team jumps out to a 31-0 halftime lead, and proceeds to win 31-24, this game was never close, even though the final margin was just 7 points. See Panthers Seahawks 2015 playoffs.</p>

<p>On the contrast, if in the middle of the third quarter the score is 24-21, and the team with 21 ends up winning 48-27, the game was a lot closer than the final score indicates (garbage time touchdowns). See Patriots Cowboys 2007 regular season.</p>

<p>So, perhaps there&rsquo;s a better way to measure game closeness than point differential.</p>

<h3 id="integrated-point-differential-ipd">Integrated Point Differential (IPD)</h3>

<p>I sought to create a better metric for evaluating how ‘close’ a game is. I’ve called my metric “integrated point differential,” or ‘ipd’ for short. To calculate <strong>ipd for a given team in a given game, we take the integral of the team’s point differential throughout the game with respect to time</strong>, where point differential is defined by ([team score] - [opponent score]).</p>

<p>To get an idea of the intuition behind the metric, consider the following game between the Patriots and Dolphins.</p>

<table>
<thead>
<tr>
<th align="center">Patriots</th>
<th align="center">Dolphins</th>
<th align="center">Time Transpired (Seconds)</th>
<th align="center">Quarter</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>

<tr>
<td align="center">3</td>
<td align="center">0</td>
<td align="center">300</td>
<td align="center">1</td>
</tr>

<tr>
<td align="center">3</td>
<td align="center">7</td>
<td align="center">780</td>
<td align="center">1</td>
</tr>

<tr>
<td align="center">3</td>
<td align="center">10</td>
<td align="center">1580</td>
<td align="center">2</td>
</tr>

<tr>
<td align="center">6</td>
<td align="center">10</td>
<td align="center">2210</td>
<td align="center">3</td>
</tr>

<tr>
<td align="center">13</td>
<td align="center">10</td>
<td align="center">2930</td>
<td align="center">4</td>
</tr>

<tr>
<td align="center">20</td>
<td align="center">10</td>
<td align="center">3430</td>
<td align="center">4</td>
</tr>
</tbody>
</table>

<p>The rows in the table represents every time there was a score in the game. “Time Transpired (Seconds)” displays how much time had already transpired in the game when the score occurred (there are 60 minutes, or 3600 seconds, in a game). For instance, the first score of the game was a field goal by the patriots, 300 seconds into the game. Note 1800 seconds is halftime, and 3600 seconds is the end of the game.</p>

<p>Here is the plot for the point differential throughout the game.</p>

<p><img src="/img/ipd/patriots_dolphins.png#center" alt="Patriots Point Differential" /></p>

<p>The point differential starts at 0 when the game begins (the score is 0 to 0). It jumps to three when the Patriots score at 300 seconds in, and drops to -4 when the Dolphins score a touchdown to lead 7-3. We continue this process for the whole game.</p>

<p>This game was by no means a blowout for the Patriots; the Patriots were trailing for a large portion of the game and never sealed the deal until the fourth quarter. We can see that the point differential is negative for a large stretch of the game when the Patriots are behind. To calculate the Patriot’s ipd in this game, we simply take the integral of the point differential, which in this case is equal to calculating the area of the space colored blue.</p>

<p>The ipd metric comes out to:$$\text{ipd} = 3*480 - 4*800 - 7*630 - 4*720 + 3*500 + 10*170 = \boxed{-5850}$$Now consider an alternative outcome:</p>

<table>
<thead>
<tr>
<th align="center">Patriots</th>
<th align="center">Dolphins</th>
<th align="center">Time Transpired (Seconds)</th>
<th align="center">Quarter</th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">0</td>
<td align="center">1</td>
</tr>

<tr>
<td align="center">7</td>
<td align="center">0</td>
<td align="center">300</td>
<td align="center">1</td>
</tr>

<tr>
<td align="center">14</td>
<td align="center">0</td>
<td align="center">780</td>
<td align="center">1</td>
</tr>

<tr>
<td align="center">17</td>
<td align="center">0</td>
<td align="center">1580</td>
<td align="center">2</td>
</tr>

<tr>
<td align="center">20</td>
<td align="center">0</td>
<td align="center">2210</td>
<td align="center">3</td>
</tr>

<tr>
<td align="center">20</td>
<td align="center">3</td>
<td align="center">2930</td>
<td align="center">4</td>
</tr>

<tr>
<td align="center">20</td>
<td align="center">10</td>
<td align="center">3430</td>
<td align="center">4</td>
</tr>
</tbody>
</table>

<p>Note the final score of the game is the same. Here is the point differential plot.</p>

<p><img src="/img/ipd/patriots_dolphins_ex2.png#center" alt="Patriots Point Differential Example 2" /></p>

<p>Once again, the point differential is 0 to begin (game is tied 0-0). The Patriots score a touchdown at 300 seconds in, and the point differential jumps to 7. The point differential is at its maximum when the Patriots lead 20-0 starting at the 2210 second mark, and ending at the 2930 second mark.</p>

<p>This game would have felt like much more of a blowout. The Patriots were in clear control of the game, before the Dolphins scored a few ‘garbage time’ points near the end. The ipd for this game is$$\text{ipd} = 7*480 + 14*800 + 17*630 + 20*720 + 17*500 + 10*170 = \boxed{49870}$$To summarize, we have two games with the same final score, but vastly different game flows. The ipd metric is able to capture this and reflects how the second game was a much more ‘dominant’ victory by the Patriots.</p>

<h3 id="spread-integrated-point-differential-sipd">Spread Integrated Point Differential (SIPD)</h3>

<p>Another interesting approach we can take is adapting this metric to NFL spreads. Just as the final score is not necessarily indicative of how close a game was, it is also not necessarily indicative of how good a bet was. In other words, even if the a team covers, they may have gotten lucky or it might have been a close call. As a gambler, we aren’t interested in games where the winning side is a close call; we are interested in determining games where the spread may be set completely inaccurately, making the winning side a ‘safe bet.’</p>

<p>Thus, it stands to reason that one might be interested in a metric that measures how ‘safe’ a bet was. Hopefully the parallels between measuring the ‘safety of a bet’ and the ‘closeness’ of a game are clear; we proceed to apply the same idea behind the ipd to the spread, creating a metric called the spread integrated point differentail, or sipd.</p>

<p>SIPD works as a simple modification to the ipd calculation. Instead of integrating the point differential over time, we integrate the point differential over time translated according to the spread. For instance, if the spread is Patriots -3, and the Patriots are ahead by 14, then the point differential (14) translated according to the spread (-3) is 11. If the Patriots are ahead by 3, then the point differential translated according to the spread is 0.</p>

<p>For instance, let’s take the (first) game from the IPD section where the Patriots won 20-10. Suppose the spread in that game was Patriots -3. Then our graph would look like:</p>

<p><img src="/img/ipd/patriots_dolphins_sipd.png#center" alt="Patriots Spread IPD" /></p>

<p>The SIPD here would be $$\text{sipd} = -3*300 + 0*480 - 7*800 -10*630 - 7*720 +0*500 + 7*170 = \boxed{-16650}$$</p>

<p>The Patriots would have covered, but the sipd accurately reflects that for much of the game, it may have seemed like the Patriots would not have covered, and that the <strong>Dolphins may have in fact been the better bet</strong> (i.e. if the same game was played in a million alternative universes, perhaps the Dolphins would have covered more often than not).</p>

<p>Note that the sipd is a translation of ipd; we can calculate $$\text{sipd} = \text{ipd} + \text{spread} *360$$</p>

<h3 id="ipd-and-sipd-in-practice">IPD and SIPD in Practice</h3>

<p>Using Python&rsquo;s BeautifulSoup Module, I scraped box score data from Pro-Football-Reference and calculated the IPD and SIPD for every game from 2002 to 2016.</p>

<h3 id="other-metrics">Other Metrics</h3>

                
                
    <div id="comments">
        
        
    </div>


                


            </div>
        </div>
    </body>
</html>

